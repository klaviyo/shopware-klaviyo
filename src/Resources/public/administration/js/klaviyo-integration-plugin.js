!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=(window.__sw__.assetPath + '/bundles/klaviyointegrationplugin/'),t(t.s="Flw2")}({"/Xd2":function(e,n,t){},"9qJ7":function(e){e.exports=JSON.parse('{"klaviyo-job-listing":{"general":{"title":"Klaviyo Job Übersicht","description":"job-listing"},"menu":{"title":"Klaviyo Job Übersicht"},"page":{"listing":{"title":"Job Übersicht","description":"Job Übersicht","grid":{"column":{"type":"Typ","message":"Nachricht","status":"Status","name":"Name","started-at":"Begonnen am","finished-at":"Fertiggestellt am","created-at":"Erstellt am"}}},"detail":{"textHeadline":"Job","jobChildrenTitle":"Job Kinder"},"job-listing":{"filter":{"job-status":"Job Status","job-status-placeholder":"Wähle einen Job Status...","job-type":"Job Typ","job-type-placeholder":"Wähle einen Job Type...","created-at":"Job erstellt am","from":"von","to":"bis"}}},"actions":{"reschedule-job":{"button":{"label":"Job nochmal ausführen"}},"show-messages":{"button":{"label":"Zeige Nachrichten"}}}},"klaviyo-integration-settings":{"label":"Klaviyo","title":"Klaviyo","general":{"title":"Allgemein","credentialsAlert":"Einstellungen müssen auf Verkaufskanal Ebene durchgeführt sein.","initialization":{"label":"Klaviyo nach der ersten Interaktion mit der Seite initialisieren.","general-label":"Interaktionseinstellungen","helpText":"Nachdem eun User mit der Seite interagiert hat, werden die Klaviyo-Skripte initialisiert. Bei nachfolgenden Seitenübergängen werden die Skripte sofort initialisiert."},"cookie":{"title":"Cookie consent"}},"pop-up":{"title":"Wieder auf Lager Popup-Stile","open-button-fieldset-label":"Pop-Up öffnen Button","close-button-fieldset-label":"Pop-Up schließen Button","subscribe-button-fieldset-label":"Anmelden Button","snippet-button-fieldset-label":"Snippet Namen","additional-classes-fieldset-label":"Zusätzliche Klassen","colorLabel":"Farbe","backgroundLabel":"Hintergrund","openBtnLabel":"Öffnen Button","closeBtnLabel":"Schließen Button","contentMessageLabel":"Inhaltsnachricht","subscribeBtnLabel":"Anmelden Button","subscribeCheckboxLabel":"Anmelden Kontrollkästchen-Text","emailFieldLabel":"E-Mail Feld Etikett","emailFieldPlaceholder":"E-Mail Feld Platzhalter"},"configs":{"credentials":{"messageNotBlank":"Pflichtfeld."},"enabled":{"label":"Account aktivieren","helpText":"Durch Aktivieren dieses Schalters kannst du das konfigurierte Klaviyo-Konto für den aktuellen Verkaufskanal aktivieren/deaktivieren."},"privateApiKey":{"label":"Klaviyo Private API Schlüssel","helpText":"Klaviyo Private API Schlüssel. Du findest ihn in deinem Klaviyo Konto."},"publicApiKey":{"label":"Klaviyo Public API Schlüssel","helpText":"Klaviyo Public API Schlüssel. Du findest ihn in deinem Klaviyo Konto."},"klaviyoListForSubscribersSync":{"label":"Klaviyo Liste für Newsletter Anmeldungen","helpText":"Der Name der Abonnentenliste in Klaviyo, zu der alle Shopware 6 Abonnenten hinzugefügt werden sollen.\\n Bei doppelten Namen wird die zuerst gefundene Liste verwendet."},"bisVariantField":{"label":"Wieder auf Lager Varianten Feldzuordnung","helpText":"Wieder auf Lager Varianten Feldzuordnung","productId":"Produkt ID"},"cookieConsent":{"label":"Cookie Consent","helpText":"Cookie Consent","nothingLabel":"Nothing","shopwareLabel":"Shopware Default","cookieBotLabel":"CookieBot"},"trackDeletedAccountOrders":{"label":"Übersicht über die Bestellungen eines gelöschten Kontos","helpText":"Sollen die Bestellevents von gelöschten Kunden zu Klaviyo synchronisiert werden? Hinweis: Wenn diese Funktion aktiviert ist, können doppelte Klaviyo-Profile synchronisiert werden."},"trackViewedProduct":{"label":"Angesehene Produkte tracken","helpText":"Soll das \\"Viewed Product\\" zu Klaviyo übertragen werden?"},"trackRecentlyViewedItems":{"label":"Kürzlich angesehene Produkte tracken","helpText":"Soll das \\"Recently Viewed Items\\" zu Klaviyo übertragen werden?"},"trackAddedToCart":{"label":"Zum Warenkorb hinzugefügt tracken","helpText":"Soll das \\"Added to Cart Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackStartedCheckout":{"label":"Begonnener Checkout tracken","helpText":"Soll das \\"Started Checkout Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackPlacedOrder":{"label":"Bestellungen tracken","helpText":"Soll das \\"Placed Order Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackOrderedProduct":{"label":"Bestelltes Produkt tracken","helpText":"Soll das \\"Ordered Product Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackFulfilledOrder":{"label":"Ausgelieferte Bestellung tracken","helpText":"Soll das \\"Fulfilled Order Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackCancelledOrder":{"label":"Stornierte Bestellung tracken","helpText":"Soll das \\"Cancelled Order Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackRefundedOrder":{"label":"Bezahlt Bestellung tracken","helpText":"Soll das \\"Paid Order Event\\" zu Klaviyo übertragen werden?\\nDas beeinflusst auch histoirische Events."},"trackSubscribedToBackInStock":{"label":"Wieder auf Lager tracken","helpText":"Soll das \\"Back In Stock Event\\" zu Klaviyo übertragen werden?\\n"},"apiValidation":{"buttonLabel":"API-key Prüfung","emptyErrorMessage":"\\"{entityName}\\" darf nicht leer sein!","generalErrorMessage":"API-Schlüssel können nicht validiert werden","incorrectCredentialsTitle":"Falsche Anmeldeinformationen","correctApiMessage":"API-keys sind gültig","listNotExistMessage":"Die angegebene Liste befindet sich nicht im Klaviyo-Konto"}},"customer":{"title":"Zusatzfelder Mapping","fieldMapping":{"labelNotFilledError":"Feldname muss ausgefüllt sein.","noMappingFieldsError":"Es gibt keine Kunden-Zusatzfelder.","item":{"fieldName":"Zusatzfeld Name","fieldNamePlaceholder":"Zusatzfeld Typ"}}}},"klaviyo_integration_plugin":{"not_available":"N/A","subscribers":{"last_synchronization_status":{"finished":"Letzte Synchronisierung: {status} ({date})","not_finished":"Letzte Synchronisierung: {status}"},"last_success_synchronization":"Letzte erfolgreiche Synchronisierung: {date}","get_synchronization_status":{"failed":"Fehler bei letzter Synchronisierung"},"schedule_synchronization":{"button_label":"Synchronisiere Abonnenten.","success":"Abonennten Synchronisierung eingeplant.","failed":"Fehler bei der Planung der Abonennten Synchronisierung.","is_running":"Abonennten Synchronisierung läuft bereits.","is_scheduled":"Abonennten Synchronisierung ist bereits eingeplant."}},"historical_events_tracking":{"last_synchronization_status":{"finished":"Letzte Synchronisierung: {status} ({date})","not_finished":"Letzte Synchronisierung: {status}"},"last_success_synchronization":"Letzte erfolgreiche Synchronisierung: {date}","get_synchronization_status":{"failed":"Fehler bei der historischen Events Tracking Synchronisierung."},"schedule_synchronization":{"button_label":"Synchronisiere historische Events.","success":"Historische Events Synchronisierung eingeplant.","failed":"Fehler bei Planung der historischen Events Synchronisation.","is_running":"Historische Events Synchronisation läuft bereits.","is_scheduled":"Historische Events Synchronisation ist bereits eingeplant."}},"promotion":{"exportInKlaviyoFormatButtonLabel":"Export im Klaviyo Format"},"productComparison":{"templates":{"template-label":{"klaviyo-product-feed":"Klaviyo (XML)"}}}}}')},DO9V:function(e,n,t){},Flw2:function(e,n,t){"use strict";t.r(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,r=void 0,r=function(e,n){if("object"!==i(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(a,"string"),"symbol"===i(r)?r:String(r)),o)}var a,r}function r(e,n){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function l(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=c(e);if(n){var o=c(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return s(this,t)}}function s(e,n){if(n&&("object"===i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Component.override("sw-promotion-v2-list",{template:'{% block sw_promotion_v2_list_smart_bar_actions_add %}\n    {% parent %}\n    <sw-button\n            :link="getExportUrl()"\n            variant="primary"\n    >\n        {{ $tc(\'klaviyo_integration_plugin.promotion.exportInKlaviyoFormatButtonLabel\') }}\n    </sw-button>\n{% endblock %}\n\n{% parent %}',methods:{getExportUrl:function(){return Shopware.Context.api.apiPath+"/klaviyo/integration/promotion/export"}}});var u=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&r(e,n)}(c,e);var n,t,i,s=l(c);function c(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"klaviyo";return o(this,c),(t=s.call(this,e,n,i)).name="klaviyoHistoricalEventsSynchronizationApiService",t}return n=c,(t=[{key:"scheduleSynchronization",value:function(){var e=this.getBasicHeaders();return this.httpClient.post("_action/klaviyo/historical-event-tracking/synchronization/schedule",{},{headers:e})}}])&&a(n.prototype,t),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),c}(Shopware.Classes.ApiService);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function g(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,n){if("object"!==d(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(o,"string"),"symbol"===d(a)?a:String(a)),i)}var o,a}function h(e,n){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function f(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return b(this,t)}}function b(e,n){if(n&&("object"===d(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&h(e,n)}(a,e);var n,t,i,o=f(a);function a(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"klaviyo";return p(this,a),(t=o.call(this,e,n,i)).name="klaviyoSubscribersSynchronizationApiService",t}return n=a,(t=[{key:"scheduleSynchronization",value:function(){var e=this.getBasicHeaders();return this.httpClient.post("_action/klaviyo/subscribers/synchronization/schedule",{},{headers:e})}}])&&g(n.prototype,t),i&&g(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}(Shopware.Classes.ApiService);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,n){if("object"!==k(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(o,"string"),"symbol"===k(a)?a:String(a)),i)}var o,a}function w(e,n){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function S(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=I(e);if(n){var o=I(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return C(this,t)}}function C(e,n){if(n&&("object"===k(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Service().register("klaviyoHistoricalEventsSynchronizationApiService",(function(e){var n=Shopware.Application.getContainer("init");return new u(n.httpClient,e.loginService)})),Shopware.Service().register("klaviyoSubscribersSynchronizationApiService",(function(e){var n=Shopware.Application.getContainer("init");return new v(n.httpClient,e.loginService)}));var P=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&w(e,n)}(a,e);var n,t,i,o=S(a);function a(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"klaviyo";return m(this,a),(t=o.call(this,e,n,i)).name="klaviyoApiKeyValidatorService",t}return n=a,(t=[{key:"validate",value:function(e,n,t){var i=this.getBasicHeaders();return this.httpClient.post("/_action/od-api-key-validate",{privateKey:e,publicKey:n,listName:t},{headers:i})}}])&&_(n.prototype,t),i&&_(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}(Shopware.Classes.ApiService);Shopware.Service().register("klaviyoApiKeyValidatorService",(function(e){var n=Shopware.Application.getContainer("init");return new P(n.httpClient,e.loginService)}));var F,K=(F=t("LVT0")).keys().reduce((function(e,n){var t={name:n.split(".")[1].split("/")[1],functional:!0,render:function(e,t){var i=t.data;return e("span",{class:[i.staticClass,i.class],style:i.style,attrs:i.attrs,on:i.on,domProps:{innerHTML:F(n)}})}};return e.push(t),e}),[]),O=Shopware.Component;K.map((function(e){return O.register(e.name,e)}));Shopware.Service("exportTemplateService").registerProductExportTemplate({name:"klaviyo-product-feed",translationKey:"klaviyo_integration_plugin.productComparison.templates.template-label.klaviyo-product-feed",headerTemplate:'<?xml version="1.0" encoding="UTF-8" ?>\n<rss version="2.0" xmlns:g="http://base.google.com/ns/1.0" xmlns:atom="http://www.w3.org/2005/Atom">\n    <Products>\n'.trim(),bodyTemplate:"<Product>\n    <id>{{ product.productNumber }}</id>\n    <title>{{ product.translated.name|escape }}</title>\n    <link>{{ seoUrl('frontend.detail.page', {'productId': product.id}) }}</link>\n    <description>{{ product.translated.description|escape }}</description>\n    <price>{% set price = product.calculatedPrice %} {% if product.calculatedPrices.count %} {% set price = product.calculatedPrices.last %} {% endif %} {{ price.unitPrice }}</price>\n    {%- if product.cover is not null and product.cover.media -%}\n    <image_link>{{ product.cover.media.url }}</image_link>\n    {%- else -%}\n    <image_link>n/a</image_link>\n    {%- endif -%}\n    {%- if product.categories|length > 0 -%}\n        {% set categoryNames = [] %}\n\n        {% for category in product.categories %}\n            {% set categoryNames = categoryNames|merge([category.translated.name]) %}\n        {% endfor %}\n        <categories>{{ categoryNames|join(',')|raw|escape }}</categories>\n    {%- else -%}\n        <categories>n/a</categories>\n    {%- endif -%}\n    <inventory_quantity>{{ product.availableStock }}</inventory_quantity>\n    <inventory_policy>1</inventory_policy>\n</Product>\n",footerTemplate:"</Products>\n</rss>\n".trim(),fileName:"klaviyo.xml",encoding:"UTF-8",fileFormat:"xml",generateByCronjob:!1,interval:86400});t("fNO0");function T(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return E(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var x=Shopware.Component,j=Shopware.Data.Criteria;x.register("klaviyo-job-listing",{template:'{% block job_listing_page %}\n    <sw-page class="klaviyo-job-list">\n        <template slot="content">\n            <od-job-listing-index ref="jobListing"\n                                  :filterCriteria="filterCriteria"\n                                  @job-display-type-changed="onDisplayModeChange"\n                                  :jobTypes="klaviyoJobTypes">\n            </od-job-listing-index>\n        </template>\n        <template #sidebar>\n            <sw-sidebar ref="odSidebar">\n                {% block od_klaviyo_jobs_list_sidebar_refresh %}\n                    <sw-sidebar-item\n                            icon="regular-undo"\n                            :title="$tc(\'sw-product.list.titleSidebarItemRefresh\')"\n                            @click="onRefresh"></sw-sidebar-item>\n                {% endblock %}\n\n                {% block od_klaviyo_jobs_list_sidebar_filters %}\n                    <sw-sidebar-filter-panel ref="odFilter"\n                            :hidden="hideFilters"\n                            entity="od_scheduler_job"\n                            :store-key="storeKey"\n                            :filters="listFilters"\n                            :defaults="defaultFilters"\n                            :active-filter-number="activeFilterNumber"\n                            @criteria-changed="updateCriteria">\n                    </sw-sidebar-filter-panel>\n                {% endblock %}\n            </sw-sidebar>\n        </template>\n    </sw-page>\n{% endblock %}\n',inject:["OdRescheduleService","repositoryFactory","filterFactory","feature"],data:function(){return{jobItems:null,isLoading:!1,reloadInterval:null,showJobInfoModal:!1,showJobSubsModal:!1,currentJobID:null,showMessagesModal:!1,currentJobMessages:null,sortType:"status",jobDisplayType:null,autoLoad:!1,autoLoadIsActive:!1,autoReloadInterval:6e4,statusFilterOptions:[],typeFilterOptions:[],filterCriteria:[],defaultFilters:["job-status-filter","job-type-filter","job-date-filter"],storeKey:"klaviyo_filters",activeFilterNumber:0,searchConfigEntity:"od_scheduler_job",showBulkEditModal:!1,hideFilters:!1}},computed:{jobRepository:function(){return this.repositoryFactory.create("od_scheduler_job")},klaviyoJobTypes:function(){return["od-klaviyo-events-sync-handler","od-klaviyo-cart-event-sync-handler","od-klaviyo-full-order-sync-handler","od-klaviyo-full-subscriber-sync-handler","od-klaviyo-order-event-sync-handler","od-klaviyo-order-sync-handler","od-klaviyo-subscriber-sync-handler"]},listFilters:function(){return this.filterFactory.create("od_scheduler_job",{"job-status-filter":{property:"status",type:"multi-select-filter",label:this.$tc("klaviyo-job-listing.page.job-listing.filter.job-status"),placeholder:this.$tc("klaviyo-job-listing.page.job-listing.filter.job-status-placeholder"),valueProperty:"value",labelProperty:"name",options:this.statusFilterOptions},"job-type-filter":{property:"name",type:"multi-select-filter",label:this.$tc("klaviyo-job-listing.page.job-listing.filter.job-type"),placeholder:this.$tc("klaviyo-job-listing.page.job-listing.filter.job-type-placeholder"),valueProperty:"value",labelProperty:"name",options:this.typeFilterOptions},"job-date-filter":{property:"createdAt",label:this.$tc("klaviyo-job-listing.page.job-listing.filter.created-at"),dateType:"datetime-local",fromFieldLabel:this.$tc("klaviyo-job-listing.page.job-listing.filter.from"),toFieldLabel:this.$tc("klaviyo-job-listing.page.job-listing.filter.to"),showTimeframe:!0}})}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.loadFilterValues()},onDisplayModeChange:function(e){var n=this.$el;if(n.classList.remove("no-filter"),"list"!==e)return n.classList.add("no-filter"),this.$refs.odSidebar.closeSidebar(),0!==this.$refs.odFilter.$el.length&&this.$refs.odFilter.resetAll(),this.hideFilters=!0;this.hideFilters=!1,this.loadFilterValues()},onRefresh:function(){this.$refs.jobListing.onRefresh(this.filterCriteria),this.loadFilterValues()},updateCriteria:function(e){this.page=1,this.filterCriteria=e,this.activeFilterNumber=e.length},loadFilterValues:function(){var e=this;this.filterLoading=!0;var n=new j;return n.addFilter(j.equals("parentId",null)),n.addSorting(j.sort("createdAt","DESC",!1)),n.addFilter(j.equalsAny("type",["od-klaviyo-events-sync-handler","od-klaviyo-cart-event-sync-handler","od-klaviyo-full-order-sync-handler","od-klaviyo-full-subscriber-sync-handler","od-klaviyo-order-event-sync-handler","od-klaviyo-order-sync-handler","od-klaviyo-subscriber-sync-handler"])),this.jobRepository.search(n,Shopware.Context.api).then((function(n){var t=T(new Set(n.map((function(e){return e.status})))),i=T(new Set(n.map((function(e){return e.name}))));return e.statusFilterOptions=[],e.typeFilterOptions=[],t.forEach((function(n){e.statusFilterOptions.push({name:e.$tc("job-listing.page.listing.grid.job-status."+n),value:n})})),i.forEach((function(n){e.typeFilterOptions.push({name:n,value:n})})),e.filterLoading=!1,Promise.resolve()})).catch((function(){e.filterLoading=!1}))}}});t("V/JL");var A=Shopware,z=A.Component,L=A.Defaults,B=Shopware.Data.Criteria;z.register("klaviyo-integration-settings",{template:'{% block klaviyo_integration_settings %}\n    <sw-page class="klaviyo-integration-settings">\n        {% block klaviyo_integration_settings_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'klaviyo-integration-settings.title\') }}\n                </h2>\n            </template>\n        {% endblock %}\n        {% block klaviyo_integration_settings_actions %}\n            <template #smart-bar-actions>\n\n                {% block klaviyo_integration_settings_actions_historical_events_synchronization_control %}\n                    <klaviyo-integration-settings-synchronization-control></klaviyo-integration-settings-synchronization-control>\n                {% endblock %}\n\n                {% block klaviyo_integration_settings_actions_save %}\n                    <sw-button-process v-model="isSaveSuccessful"\n                                       class="klaviyo-integration-settings-save"\n                                       variant="primary"\n                                       :isLoading="isLoading"\n                                       :disabled="isLoading || hasError"\n                                       @click="onSave">\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block klaviyo_integration_settings_content %}\n            <template #content>\n\n\n                {% block klaviyo_integration_settings_content_sales_channel_config %}\n                    <sw-sales-channel-config v-model="config"\n                                             ref="configComponent"\n                                             domain="KlaviyoIntegrationPlugin.config">\n                        {% block klaviyo_integration_settings_content_sales_channel_config_channel %}\n                            <template #select="{ onInput, selectedSalesChannelId }">\n                                {% block klaviyo_integration_settings_content_sales_channel_config_channel_card %}\n                                    <sw-card class="sw-card--grid"\n                                             :title="$tc(\'global.entities.sales_channel\', 2)">\n                                        <div class="card-container klaviyo-integration-settings-sales-channel">\n                                            {% block klaviyo_integration_settings_content_sales_channel_config_channel_card_select %}\n                                                <sw-single-select v-model="selectedSalesChannelId"\n                                                                  labelProperty="translated.name"\n                                                                  valueProperty="id"\n                                                                  :isLoading="isLoading"\n                                                                  :options="salesChannels"\n                                                                  @change="onInput">\n                                                </sw-single-select>\n                                            {% endblock %}\n                                        </div>\n                                    </sw-card>\n                                {% endblock %}\n                            </template>\n                        {% endblock %}\n\n                        {% block klaviyo_integration_settings_content_sales_channel_configs %}\n                            <template #content="{ actualConfigData, allConfigs, selectedSalesChannelId }">\n                                <div v-if="actualConfigData">\n\n                                    {% block klaviyo_integration_settings_content_sales_channel_general %}\n                                        <klaviyo-integration-settings-general\n                                                :actualConfigData="actualConfigData"\n                                                :allConfigs="allConfigs"\n                                                :selectedSalesChannelId="selectedSalesChannelId"\n                                                :privateKeyErrorState="privateKeyErrorState"\n                                                :publicKeyErrorState="publicKeyErrorState"\n                                                :listNameErrorState="listNameErrorState">\n                                        </klaviyo-integration-settings-general>\n                                    {% endblock %}\n\n                                    {% block klaviyo_integration_settings_content_sales_channel_customer %}\n                                        <klaviyo-integration-settings-customer :allConfigs="allConfigs"\n                                                                               :mappingErrorStates="mappingErrorStates">\n                                        </klaviyo-integration-settings-customer>\n                                    {% endblock %}\n\n                                </div>\n                            </template>\n                        {% endblock %}\n\n                    </sw-sales-channel-config>\n                {% endblock %}\n\n                {% block klaviyo_integration_settings_content_loading %}\n                    <sw-loader v-if="isLoading"></sw-loader>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n    </sw-page>\n{% endblock %}\n',inject:["repositoryFactory"],data:function(){return{isLoading:!1,isSaveSuccessful:!1,privateKeyFilled:!1,publicKeyFilled:!1,listNameFilled:!1,messageBlankErrorState:null,mappingErrorStates:{},config:null,salesChannels:[]}},metaInfo:function(){return{title:this.$createTitle()}},created:function(){this.createdComponent()},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},salesChannelCriteria:function(){var e=new B(1,500);return e.addFilter(B.equalsAny("typeId",[L.storefrontSalesChannelTypeId,L.apiSalesChannelTypeId])),e},privateKeyErrorState:function(){return this.privateKeyFilled?null:this.messageBlankErrorState},publicKeyErrorState:function(){return this.publicKeyFilled?null:this.messageBlankErrorState},listNameErrorState:function(){return this.listNameFilled?null:this.messageBlankErrorState},hasError:function(){var e=0!==Object.values(this.mappingErrorStates).filter((function(e){return void 0!==e.code})).length;return!this.privateKeyFilled||!this.publicKeyFilled||!this.listNameFilled||e}},watch:{config:{handler:function(){var e=this.$refs.configComponent.selectedSalesChannelId,n=!!this.config["KlaviyoIntegrationPlugin.config.enabled"];null!==e&&n?(this.privateKeyFilled=!!this.config["KlaviyoIntegrationPlugin.config.privateApiKey"],this.publicKeyFilled=!!this.config["KlaviyoIntegrationPlugin.config.publicApiKey"],this.listNameFilled=!!this.config["KlaviyoIntegrationPlugin.config.klaviyoListForSubscribersSync"]):this.privateKeyFilled=this.publicKeyFilled=this.listNameFilled=!0},deep:!0}},methods:{createdComponent:function(){this.getSalesChannels(),this.messageBlankErrorState={code:1,detail:this.$tc("klaviyo-integration-settings.configs.credentials.messageNotBlank")}},onChangeLanguage:function(){this.getSalesChannels()},getSalesChannels:function(){var e=this;this.isLoading=!0,this.salesChannelRepository.search(this.salesChannelCriteria,Shopware.Context.api).then((function(n){n.add({id:null,translated:{name:e.$tc("sw-sales-channel-switch.labelDefaultOption")}}),e.salesChannels=n})).finally((function(){e.isLoading=!1}))},onSave:function(){var e=this;this.hasError||(this.isLoading=!0,this.$refs.configComponent.save().then((function(){e.isSaveSuccessful=!0})).finally((function(){e.isLoading=!1})))}}});t("YZ4t");function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,o,a,r,l=[],s=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(i=a.call(t)).done)&&(l.push(i.value),l.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return $(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var N=Shopware,D=N.Component,M=N.Mixin;N.Utils;D.register("klaviyo-integration-settings-general",{template:'{% block klaviyo_integration_settings_general %}\n    <div>\n        <sw-card :title="$tc(\'klaviyo-integration-settings.general.initialization.general-label\')"\n                 class="klaviyo-interaction-settings">\n            <sw-inherit-wrapper\n                class="cookie-consent-inheritance"\n                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.cookieConsent\']"\n                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.cookieConsent\']"\n                :label="$tc(\'klaviyo-integration-settings.configs.cookieConsent.label\')"\n                :help-text="$tc(\'klaviyo-integration-settings.configs.cookieConsent.helpText\')">\n                <template #content="props">\n                    <sw-single-select name="KlaviyoIntegrationPlugin.config.cookieConsent"\n                                      labelProperty="label"\n                                      valueProperty="value"\n                                      :options="createCookieConsentOptions"\n                                      :isInherited="props.isInherited"\n                                      :disabled="props.isInherited"\n                                      show-clearable-button\n                                      :value="props.currentValue"\n                                      @change="props.updateCurrentValue">\n                    </sw-single-select>\n                </template>\n            </sw-inherit-wrapper>\n\n            <sw-inherit-wrapper\n                    v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.isInitializeKlaviyoAfterInteraction\']"\n                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.isInitializeKlaviyoAfterInteraction\']"\n                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                <template #content="props">\n                    <sw-switch-field name="KlaviyoIntegrationPlugin.config.isInitializeKlaviyoAfterInteraction"\n                                     :mapInheritance="props"\n                                     :label="$tc(\'klaviyo-integration-settings.general.initialization.label\')"\n                                     :disabled="props.isInherited"\n                                     :value="props.currentValue"\n                                     :helpText="$tc(\'klaviyo-integration-settings.general.initialization.helpText\')"\n                                     @change="props.updateCurrentValue">\n                    </sw-switch-field>\n                </template>\n            </sw-inherit-wrapper>\n        </sw-card>\n        <sw-card :title="$tc(\'klaviyo-integration-settings.general.title\')">\n            {% block klaviyo_integration_settings_general_credentials_alert %}\n                <sw-alert v-if="selectedSalesChannelId === null" variant="warning">\n                    {{ $t(\'klaviyo-integration-settings.general.credentialsAlert\') }}\n                </sw-alert>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_test_api %}\n                <sw-button-process variant="ghost" v-if="selectedSalesChannelId !== null"\n                                   :isLoading="apiValidationInProgress"\n                                   @click="validateApiCredentials">\n                    {{ $tc(\'klaviyo-integration-settings.configs.apiValidation.buttonLabel\') }}\n                </sw-button-process>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_enabled %}\n                <sw-switch-field\n                        v-if="selectedSalesChannelId !== null"\n                        class="no-top-margin"\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.enabled\']"\n                        name="KlaviyoIntegrationPlugin.config.enabled"\n                        :label="$tc(\'klaviyo-integration-settings.configs.enabled.label\')"\n                        :helpText="$tc(\'klaviyo-integration-settings.configs.enabled.helpText\')">\n                </sw-switch-field>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_private_api_key %}\n                <sw-password-field\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.privateApiKey\']"\n                        name="KlaviyoIntegrationPlugin.config.privateApiKey"\n                        type="text"\n                        :label="$tc(\'klaviyo-integration-settings.configs.privateApiKey.label\')"\n                        :helpText="$tc(\'klaviyo-integration-settings.configs.privateApiKey.helpText\')"\n                        :disabled="selectedSalesChannelId === null"\n                        :error="privateKeyErrorState"\n                        required>\n                </sw-password-field>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_public_api_key %}\n                <sw-field\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.publicApiKey\']"\n                        name="KlaviyoIntegrationPlugin.config.privateApiKey"\n                        type="text"\n                        :label="$tc(\'klaviyo-integration-settings.configs.publicApiKey.label\')"\n                        :helpText="$tc(\'klaviyo-integration-settings.configs.publicApiKey.helpText\')"\n                        :disabled="selectedSalesChannelId === null"\n                        :error="publicKeyErrorState"\n                        required>\n                </sw-field>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_klaviyo_list_for_subscribers_sync %}\n                <sw-field\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.klaviyoListForSubscribersSync\']"\n                        name="KlaviyoIntegrationPlugin.config.privateApiKey"\n                        type="text"\n                        :label="$tc(\'klaviyo-integration-settings.configs.klaviyoListForSubscribersSync.label\')"\n                        :helpText="$tc(\'klaviyo-integration-settings.configs.klaviyoListForSubscribersSync.helpText\')"\n                        :disabled="selectedSalesChannelId === null"\n                        :error="listNameErrorState"\n                        required>\n                </sw-field>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_varian_for_bis %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.bisVariantField\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.bisVariantField\']"\n                                    :label="$tc(\'klaviyo-integration-settings.configs.bisVariantField.label\')"\n                                    :help-text="$tc(\'klaviyo-integration-settings.configs.bisVariantField.helpText\')">\n                    <template #content="props">\n                        <sw-single-select name="KlaviyoIntegrationPlugin.config.bisVariantField"\n                                          labelProperty="label"\n                                          valueProperty="value"\n                                          :options="createBisVariantFieldOptions"\n                                          :isInherited="props.isInherited"\n                                          :disabled="props.isInherited"\n                                          show-clearable-button\n                                          :value="props.currentValue"\n                                          @change="props.updateCurrentValue">\n                        </sw-single-select>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_deleted_account_orders %}\n                <sw-inherit-wrapper\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackDeletedAccountOrders\']"\n                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackDeletedAccountOrders\']"\n                        :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackDeletedAccountOrders"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackDeletedAccountOrders.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackDeletedAccountOrders.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_viewed_product %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackViewedProduct\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackViewedProduct\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackViewedProduct"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackViewedProduct.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackViewedProduct.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_recently_viewed_items %}\n                <sw-inherit-wrapper\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackRecentlyViewedItems\']"\n                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackRecentlyViewedItems\']"\n                        :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackRecentlyViewedItems"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackRecentlyViewedItems.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackRecentlyViewedItems.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_added_to_cart %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackAddedToCart\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackAddedToCart\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackAddedToCart"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackAddedToCart.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackAddedToCart.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_started_checkout %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackStartedCheckout\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackStartedCheckout\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackStartedCheckout"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackStartedCheckout.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackStartedCheckout.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_placed_order %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackPlacedOrder\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackPlacedOrder\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackPlacedOrder"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackPlacedOrder.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackPlacedOrder.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_ordered_product %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackOrderedProduct\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackOrderedProduct\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackOrderedProduct"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackOrderedProduct.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackOrderedProduct.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_fulfilled_order %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackFulfilledOrder\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackFulfilledOrder\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackFulfilledOrder"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackFulfilledOrder.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackFulfilledOrder.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_cancelled_order %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackCancelledOrder\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackCancelledOrder\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackCancelledOrder"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackCancelledOrder.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackCancelledOrder.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_refunded_order %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackRefundedOrder\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackRefundedOrder\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackRefundedOrder"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackRefundedOrder.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackRefundedOrder.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n\n            {% block klaviyo_integration_settings_general_track_paid_order %}\n                <sw-inherit-wrapper v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackPaidOrder\']"\n                                    :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackPaidOrder\']"\n                                    :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackPaidOrder"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackPaidOrder.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackPaidOrder.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n\n            {% block klaviyo_integration_settings_general_track_back_in_stock %}\n                <sw-inherit-wrapper\n                        v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackSubscribedToBackInStock\']"\n                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.trackSubscribedToBackInStock\']"\n                        :customInheritationCheckFunction="checkBoolFieldInheritance">\n                    <template #content="props">\n                        <sw-switch-field name="KlaviyoIntegrationPlugin.config.trackSubscribedToBackInStock"\n                                         :mapInheritance="props"\n                                         :label="$tc(\'klaviyo-integration-settings.configs.trackSubscribedToBackInStock.label\')"\n                                         :helpText="$tc(\'klaviyo-integration-settings.configs.trackSubscribedToBackInStock.helpText\')"\n                                         :disabled="props.isInherited"\n                                         :value="props.currentValue"\n                                         @change="props.updateCurrentValue">\n                        </sw-switch-field>\n                    </template>\n                </sw-inherit-wrapper>\n            {% endblock %}\n        </sw-card>\n        <sw-card\n                :title="$tc(\'klaviyo-integration-settings.pop-up.title\')"\n                v-if="actualConfigData[\'KlaviyoIntegrationPlugin.config.trackSubscribedToBackInStock\']">\n            <fieldset>\n                <legend>{{ $tc(\'klaviyo-integration-settings.pop-up.open-button-fieldset-label\') }}</legend>\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_show_button %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.popUpOpenBtnColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.popUpOpenBtnColor\']"\n                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.colorLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.popUpOpenBtnColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_show_button_bg %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.popUpOpenBtnBgColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.popUpOpenBtnBgColor\']"\n                        >\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.backgroundLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.popUpOpenBtnBgColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n                </sw-container>\n            </fieldset>\n\n            <fieldset>\n                <legend>{{ $tc(\'klaviyo-integration-settings.pop-up.close-button-fieldset-label\') }}</legend>\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_hide_button %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.popUpCloseBtnColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.popUpCloseBtnColor\']"\n                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.colorLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.popUpCloseBtnColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_hide_button_bg %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.popUpCloseBtnBgColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.popUpCloseBtnBgColor\']"\n                        >\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.backgroundLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.popUpCloseBtnBgColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n                </sw-container>\n            </fieldset>\n\n            <fieldset>\n                <legend>{{ $tc(\'klaviyo-integration-settings.pop-up.subscribe-button-fieldset-label\') }}</legend>\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_subscribe_button %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.subscribeBtnColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.subscribeBtnColor\']"\n                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.colorLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.subscribeBtnColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_subscribe_button_bg %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.subscribeBtnBgColor\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.subscribeBtnBgColor\']"\n                        >\n                            <template #content="props">\n                                <sw-field\n                                        :label="$tc(\'klaviyo-integration-settings.pop-up.backgroundLabel\')"\n                                        type="colorpicker"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.subscribeBtnBgColor"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n                </sw-container>\n            </fieldset>\n\n            <fieldset>\n                <legend>{{ $tc(\'klaviyo-integration-settings.pop-up.snippet-button-fieldset-label\') }}</legend>\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_open_button_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.openBtnLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.openBtnLabel"\n                                disabled></sw-field>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_close_button_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.closeBtnLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.closeBtnLabel"\n                                disabled></sw-field>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_email_field_label_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.emailFieldLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.email"\n                                disabled></sw-field>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_close_button_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.emailFieldPlaceholder\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.email-placeholder"\n                                disabled></sw-field>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns="5fr 5fr" gap="16px">\n\n                    {% block klaviyo_integration_settings_pop_up_subscribe_button_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.subscribeBtnLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.subscribeBtnLabel"\n                                disabled></sw-field>\n                    {% endblock %}\n\n                    {% block klaviyo_integration_settings_pop_up_subscribe_checkbox_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.subscribeCheckboxLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.subscribe-to-newsletter"\n                                disabled></sw-field>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns="5fr 5fr" gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_content_message_snippet %}\n                        <sw-field\n                                :label="$tc(\'klaviyo-integration-settings.pop-up.contentMessageLabel\')"\n                                type="text"\n                                value="klaviyo.back-in-stock.modal.contentMessage"\n                                disabled></sw-field>\n                    {% endblock %}\n                </sw-container>\n            </fieldset>\n\n            <fieldset>\n                <legend>{{ $tc(\'klaviyo-integration-settings.pop-up.additional-classes-fieldset-label\') }}</legend>\n                <sw-container gap="16px">\n                    {% block klaviyo_integration_settings_pop_up_additional_classes %}\n                        <sw-inherit-wrapper\n                                v-model="actualConfigData[\'KlaviyoIntegrationPlugin.config.popUpAdditionalClasses\']"\n                                :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'KlaviyoIntegrationPlugin.config.popUpAdditionalClasses\']"\n                                :customInheritationCheckFunction="checkTextFieldInheritance">\n                            <template #content="props">\n                                <sw-field\n                                        type="text"\n                                        :map-inheritance="props"\n                                        :value="props.currentValue"\n                                        :disabled="props.isInherited"\n                                        name="KlaviyoIntegrationPlugin.config.popUpAdditionalClasses"\n                                        @input="props.updateCurrentValue"></sw-field>\n                            </template>\n                        </sw-inherit-wrapper>\n                    {% endblock %}\n                </sw-container>\n            </fieldset>\n        </sw-card>\n    </div>\n{% endblock %}\n',inject:["klaviyoApiKeyValidatorService"],mixins:[M.getByName("notification")],props:{actualConfigData:{type:Object,required:!0},allConfigs:{type:Object,required:!0},selectedSalesChannelId:{type:String,required:!1,default:null},privateKeyErrorState:{type:Object,required:!1,default:null},publicKeyErrorState:{type:Object,required:!1,default:null},listNameErrorState:{type:Object,required:!1,default:null}},data:function(){return{isLoading:!1,apiValidationInProgress:!1,cookieConsentOptions:[{name:"Nothing",value:"nothing"},{name:"Shopware default",value:"shopware"},{name:"CookieBot",value:"cookiebot"}]}},computed:{createBisVariantFieldOptions:function(){return[{label:this.$tc("klaviyo-integration-settings.configs.bisVariantField.productId"),value:"product-id"},{label:this.$tc("sw-product.basicForm.labelProductNumber"),value:"product-number"}]},createCookieConsentOptions:function(){return[{label:this.$tc("klaviyo-integration-settings.configs.cookieConsent.nothingLabel"),value:"nothing"},{label:this.$tc("klaviyo-integration-settings.configs.cookieConsent.shopwareLabel"),value:"shopware"},{label:this.$tc("klaviyo-integration-settings.configs.cookieConsent.cookieBotLabel"),value:"cookiebot"}]}},created:function(){this.createdComponent()},methods:{createdComponent:function(){for(var e="KlaviyoIntegrationPlugin.config.",n=0,t=Object.entries({enabled:!1,bisVariantField:"product-number",trackDeletedAccountOrders:!1,trackViewedProduct:!0,trackRecentlyViewedItems:!0,trackAddedToCart:!0,trackStartedCheckout:!0,trackPlacedOrder:!0,trackOrderedProduct:!0,trackFulfilledOrder:!0,trackCancelledOrder:!0,trackRefundedOrder:!0,trackPaidOrder:!1,trackSubscribedToBackInStock:!0,isInitializeKlaviyoAfterInteraction:!0,popUpOpenBtnColor:"",popUpOpenBtnBgColor:"",popUpCloseBtnColor:"",popUpCloseBtnBgColor:"",subscribeBtnColor:"",subscribeBtnBgColor:"",popUpAdditionalClasses:"",cookieConsent:"shopware"});n<t.length;n++){var i=V(t[n],2),o=i[0],a=i[1];void 0===this.allConfigs.null[e+o]&&this.$set(this.allConfigs.null,e+o,a)}},checkTextFieldInheritance:function(e){return"string"!=typeof e||e.length<=0},checkBoolFieldInheritance:function(e){return"boolean"!=typeof e},validateApiCredentials:function(){var e=this;this.apiValidationInProgress=!0;var n=this.actualConfigData["KlaviyoIntegrationPlugin.config.privateApiKey"],t=this.actualConfigData["KlaviyoIntegrationPlugin.config.publicApiKey"],i=this.actualConfigData["KlaviyoIntegrationPlugin.config.klaviyoListForSubscribersSync"];this.credentialsEmptyValidation("privateApiKey",n)*this.credentialsEmptyValidation("publicApiKey",t)*this.credentialsEmptyValidation("klaviyoListForSubscribersSync",i)?this.klaviyoApiKeyValidatorService.validate(n,t,i).then((function(n){if(200===n.status){var t=n.data;t.success?e.createNotificationSuccess({title:e.$root.$tc("global.default.success"),message:e.$tc("klaviyo-integration-settings.configs.apiValidation.correctApiMessage")}):t.general_error?e.createNotificationError({message:e.$tc("klaviyo-integration-settings.configs.apiValidation.generalErrorMessage")}):t.incorrect_credentials?e.createNotificationError({title:e.$tc("klaviyo-integration-settings.configs.apiValidation.incorrectCredentialsTitle"),message:t.incorrect_credentials_message}):t.incorrect_list&&e.createNotificationWarning({message:e.$tc("klaviyo-integration-settings.configs.apiValidation.listNotExistMessage")})}else e.createNotificationError({message:e.$tc("klaviyo-integration-settings.configs.apiValidation.generalErrorMessage")})})).catch((function(){e.createNotificationError({message:e.$tc("klaviyo-integration-settings.configs.apiValidation.generalErrorMessage")})})).finally((function(){e.apiValidationInProgress=!1})):this.apiValidationInProgress=!1},credentialsEmptyValidation:function(e,n){return void 0!==n&&""!==n&&null!==n||(this.createNotificationError({message:this.$tc("klaviyo-integration-settings.configs.apiValidation.emptyErrorMessage",0,{entityName:this.$tc("klaviyo-integration-settings.configs."+e+".label")})}),!1)}}});t("j7QG");var R=Shopware,U=R.Component,J=R.Context,H=Shopware.Data.Criteria;U.register("klaviyo-integration-settings-customer",{template:'{% block klaviyo_integration_settings_customer %}\n    <sw-card :title="$tc(\'klaviyo-integration-settings.customer.title\')">\n\n        {% block klaviyo_integration_settings_customer_custom_field_mapping %}\n\n            <template v-if="!isLoading" v-for="mappedField, mappedKey in customFieldMapping">\n                <sw-container columns="2fr 5fr 5fr" gap="16px">\n\n                    <sw-switch-field\n                            :label="$tc(\'sw-boolean-filter.active\')"\n                            :disabled="isLoading"\n                            size="small"\n                            v-model="mappedField.active">\n                    </sw-switch-field>\n\n                    <sw-text-field v-model="mappedField.customLabel"\n                                   :disabled="!mappedField.active"\n                                   :placeholder="$tc(\'klaviyo-integration-settings.customer.fieldMapping.item.fieldNamePlaceholder\')"\n                                   :error="mappingErrorStates[mappedKey]?.code !== undefined ? mappingErrorStates[mappedKey] : null"\n                                   :label="$tc(\'klaviyo-integration-settings.customer.fieldMapping.item.fieldName\')">\n                    </sw-text-field>\n                    <div class="custom-field-hint-container">\n                        <span>{{ getCustomFieldHint(mappedKey) }}</span>\n                    </div>\n                </sw-container>\n            </template>\n\n            <div v-if="!isLoading && noCustomFieldsError" class="klaviyo-fieldmapping-notice-block">\n                {{ $tc(noCustomFieldsError) }}\n            </div>\n\n        {% endblock %}\n        <sw-loader v-if="isLoading"/>\n\n    </sw-card>\n{% endblock %}\n',props:{allConfigs:{type:Object,required:!0},mappingErrorStates:{type:Object,required:!0}},inject:["repositoryFactory"],created:function(){this.createdComponent()},data:function(){return{isLoading:!1,isSomeMappingsNotFilled:!1,systemCustomFields:null,configPath:"KlaviyoIntegrationPlugin.config.customerFieldMapping"}},computed:{customFieldRepository:function(){return this.repositoryFactory.create("custom_field")},customFieldCriteria:function(){var e=new H;return e.addSorting(H.sort("name","ASC",!0)),e.addFilter(H.equals("customFieldSet.relations.entityName","customer")),e.addFilter(H.equals("active",1)),e.addAssociation("customFieldSet"),e},noCustomFieldsError:function(){return 0===this.systemCustomFields.total?this.$tc("klaviyo-integration-settings.customer.fieldMapping.noMappingFieldsError"):null},customFieldMapping:{get:function(){return this.allConfigs.null[this.configPath]}}},watch:{customFieldMapping:{handler:function(){var e=this,n=this.allConfigs.null[this.configPath];Object.keys(n).every((function(t){return n[t].active&&!n[t].customLabel?e.$set(e.mappingErrorStates,t,{code:1,detail:e.$tc("klaviyo-integration-settings.customer.fieldMapping.labelNotFilledError")}):e.$delete(e.mappingErrorStates,t),!0}))},deep:!0}},methods:{createdComponent:function(){var e=this;this.isLoading=!0,this.localeIso=J.app.fallbackLocale,(void 0===this.customFieldMapping||Array.isArray(this.customFieldMapping))&&this.$set(this.allConfigs.null,this.configPath,{}),this.customFieldRepository.search(this.customFieldCriteria,J.api).then((function(n){e.systemCustomFields=n})).finally((function(){e.processCustomFieldMappings(),e.isLoading=!1}))},processCustomFieldMappings:function(){var e=this,n=[],t=this.systemCustomFields.map((function(e){return e.name}));Object.keys(this.customFieldMapping).forEach((function(i){e.customFieldMapping[i].active&&!e.customFieldMapping[i].customLabel?e.$set(e.mappingErrorStates,i,{code:1,detail:e.$tc("klaviyo-integration-settings.customer.fieldMapping.labelNotFilledError")}):e.$set(e.mappingErrorStates,i,{}),n.push(e.customFieldMapping[i].customFieldName),-1===t.indexOf(e.customFieldMapping[i].customFieldName)&&(e.$delete(e.mappingErrorStates,i),e.$delete(e.customFieldMapping,i))})),t.forEach((function(t){n.includes(t)||e.addNewEmptyFieldMapping(e.systemCustomFields.filter((function(e){return e.name===t}))[0])}))},getCustomFieldHint:function(e){var n,t,i,o,a=this.customFieldMapping[e].customFieldName,r=null!==(n=this.systemCustomFields.filter((function(e){return e.name===a}))[0])&&void 0!==n?n:{};return null!==(t=null!==(i=null==r||null===(o=r.config)||void 0===o?void 0:o.label[this.localeIso])&&void 0!==i?i:null==r?void 0:r.name)&&void 0!==t?t:"<not_found>"},addNewEmptyFieldMapping:function(e){var n="mapping_"+this.generateGuid();this.$set(this.customFieldMapping,n,{customLabel:"",customFieldName:e.name,active:!1}),this.$set(this.mappingErrorStates,n,{})},generateGuid:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}});function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,n){if("object"!==q(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==q(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(o,"string"),"symbol"===q(a)?a:String(a)),i)}var o,a}var G=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=n,this.isSynchronizationInProgress=!1,this.isSynchronizationSuccess=!1,this.date=t}var n,t,i;return n=e,(t=[{key:"scheduleSynchronization",value:function(){var e=this.apiService.scheduleSynchronization();return this.isSynchronizationInProgress=!0,e.then(function(e){this.isSynchronizationSuccess=!!e.data.isScheduled}.bind(this)).catch(function(e){this.isSynchronizationSuccess=!1}.bind(this)).finally(function(){this.isSynchronizationInProgress=!1}.bind(this)),e}},{key:"resetSynchronizationState",value:function(){this.isSynchronizationInProgress=!1,this.isSynchronizationSuccess=!1}}])&&W(n.prototype,t),i&&W(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(),Y=Shopware,Z=Y.Component,Q=Y.Mixin,X=Shopware.Utils.format.date;Z.register("klaviyo-integration-settings-synchronization-control",{template:'{% block klaviyo_integration_settings_synchronization_control %}\n    <div class="klaviyo-integration-settings-synchronization-control">\n\n        {% block klaviyo_integration_settings_synchronization_control_historical_events_tracking %}\n            <sw-button-process variant="ghost"\n                               :isLoading="historicalEventsJobInteractor.isSynchronizationInProgress"\n                               :processSuccess="historicalEventsJobInteractor.isSynchronizationSuccess"\n                               @click="scheduleHistoricalEventsSynchronization"\n                               @process-finish="resetHistoricalEventsSynchronizationState">\n                {{ $tc(\'klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.button_label\') }}\n            </sw-button-process>\n        {% endblock %}\n\n        {% block klaviyo_integration_settings_synchronization_control_subscribers %}\n            <sw-button-process variant="ghost"\n                               :isLoading="subscribersSynchronizationJobInteractor.isSynchronizationInProgress"\n                               :processSuccess="subscribersSynchronizationJobInteractor.isSynchronizationSuccess"\n                               @click="scheduleSubscribersSynchronization"\n                               @process-finish="resetSubscribersSynchronizationState">\n                {{ $tc(\'klaviyo_integration_plugin.subscribers.schedule_synchronization.button_label\') }}\n            </sw-button-process>\n        {% endblock %}\n\n    </div>\n{% endblock %}\n',inject:["klaviyoHistoricalEventsSynchronizationApiService","klaviyoSubscribersSynchronizationApiService"],mixins:[Q.getByName("notification")],data:function(){return{historicalEventsJobInteractor:new G(this.klaviyoHistoricalEventsSynchronizationApiService,X),subscribersSynchronizationJobInteractor:new G(this.klaviyoSubscribersSynchronizationApiService,X)}},methods:{scheduleHistoricalEventsSynchronization:function(){this.historicalEventsJobInteractor.scheduleSynchronization().then(function(e){e.data.isScheduled?this.createNotificationSuccess({message:this.$tc("klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.success")}):"SYNCHRONIZATION_IS_ALREADY_RUNNING"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.is_running")}):"SYNCHRONIZATION_IS_ALREADY_SCHEDULED"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.is_scheduled")}):this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.failed")})}.bind(this)).catch(function(e){this.createNotificationError({message:this.$tc("klaviyo_integration_plugin.historical_events_tracking.schedule_synchronization.failed")})}.bind(this))},scheduleSubscribersSynchronization:function(){this.subscribersSynchronizationJobInteractor.scheduleSynchronization().then(function(e){e.data.isScheduled?this.createNotificationSuccess({message:this.$tc("klaviyo_integration_plugin.subscribers.schedule_synchronization.success")}):"SYNCHRONIZATION_IS_ALREADY_RUNNING"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.subscribers.schedule_synchronization.is_running")}):"SYNCHRONIZATION_IS_ALREADY_SCHEDULED"===e.data.errorCode?this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.subscribers.schedule_synchronization.is_scheduled")}):this.createNotificationWarning({message:this.$tc("klaviyo_integration_plugin.subscribers.schedule_synchronization.failed")})}.bind(this)).catch(function(){this.createNotificationError({message:this.$tc("klaviyo_integration_plugin.subscribers.schedule_synchronization.failed")})}.bind(this))},resetSubscribersSynchronizationState:function(){this.subscribersSynchronizationJobInteractor.resetSynchronizationState()},resetHistoricalEventsSynchronizationState:function(){this.historicalEventsJobInteractor.resetSynchronizationState()}}});t("GaF8");Shopware.Component.register("klaviyo-integration-settings-icon",{template:'{% block klaviyo_integration_settings_icon %}\n    <div class="od-klaviy-settings-icon">\n        <img height="30" width="30" src=\'data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjY2IDE3OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjb2xvcj0icmdiYSgyNTUsIDI1NSwgMjU1LCAxKSIgcm9sZT0iaW1nIgogICAgIGFyaWEtbGFiZWw9IktsYXZpeW8gTG9nbyI+CiAgICA8cGF0aCBkPSJNMjY2IDE3OEgwVjBoMjY2bC01NS44MzUgODlMMjY2IDE3OFoiIGZpbGw9InJnYmEoMjU1LCAyNTUsIDI1NSwgMSkiPjwvcGF0aD4KPC9zdmc+Cg==\'/>\n    </div>\n{% endblock %}'});var ee=t("9qJ7"),ne=t("TI6f");Shopware.Module.register("klaviyo-plugin",{type:"plugin",title:"klaviyo-integration-settings.title",description:"klaviyo-job-listing.general.description",color:"#F88962",icon:"default-avatar-multiple",snippets:{"de-DE":ee,"en-GB":ne},routes:{index:{component:"klaviyo-job-listing",path:"index"},settings:{component:"klaviyo-integration-settings",path:"settings",meta:{parentPath:"sw.settings.index.plugins"}}},settingsItem:{group:"plugins",to:"klaviyo.plugin.settings",label:"klaviyo-integration-settings.label",iconComponent:"klaviyo-integration-settings-icon",backgroundEnabled:!0},navigation:[{id:"klaviyo",label:"klaviyo-job-listing.menu.title",color:"#F88962",icon:"default-avatar-multiple",parent:"sw-marketing",path:"klaviyo.plugin.index",position:100}]});Shopware.Component.override("sw-product-deliverability-form",{template:'{% block sw_product_deliverability_form_max_purchase_field %}\n    {% parent() %}\n    {% block od_klaviyo_back_in_stock_email_notification %}\n        <sw-field v-model="product.customFields.klaviyo_back_in_stock_disabled"\n                  type="switch"\n                  label="Disable back in stock email notifications"\n        />\n    {% endblock %}\n{% endblock %}',methods:{createdComponent:function(){void 0===this.product.stock&&(this.product.stock=0),this.product&&(this.product.customFields||(this.product.customFields={}),this.product.customFields.klaviyo_back_in_stock_disabled||(this.product.customFields.klaviyo_back_in_stock_disabled=!1))}}})},GaF8:function(e,n,t){var i=t("/Xd2");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("ydqr").default)("3f2459a5",i,!0,{})},"Gc0+":function(e,n,t){},LVT0:function(e,n,t){var i={"./icons-klaviyo-integration.svg":"Qrhk"};function o(e){var n=a(e);return t(n)}function a(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id="LVT0"},Qrhk:function(e,n){e.exports='<svg viewBox="0 0 266 178" fill="none" xmlns="http://www.w3.org/2000/svg" color="rgba(255, 255, 255, 1)" role="img" aria-label="Klaviyo Logo"><path d="M266 178H0V0h266l-55.835 89L266 178Z" fill="rgba(255, 255, 255, 1)"></path></svg>'},TI6f:function(e){e.exports=JSON.parse('{"klaviyo-job-listing":{"general":{"title":"Klaviyo Job Listing","description":"job-listing"},"menu":{"title":"Klaviyo Job Listing"},"page":{"listing":{"title":"Job Listing","description":"List of Jobs","grid":{"column":{"type":"Type","message":"Message","status":"Status","name":"Name","started-at":"Started at","finished-at":"Finished at","created-at":"Created at"}}},"detail":{"textHeadline":"Job","jobChildrenTitle":"Job Children"},"job-listing":{"filter":{"job-status":"Job status","job-status-placeholder":"Select job status...","job-type":"Job type","job-type-placeholder":"Select job type...","created-at":"Job Created At","from":"From","to":"To"}}},"actions":{"reschedule-job":{"button":{"label":"Reschedule job"}},"show-messages":{"button":{"label":"Show messages"}}}},"klaviyo-integration-settings":{"label":"Klaviyo","title":"Klaviyo","general":{"title":"General","credentialsAlert":"All credentials must be configured on sales channel level.","initialization":{"label":"Initialize Klaviyo After First Interaction With Page.","general-label":"Interaction settings","helpText":"After the client starts interacting with the page, the Klaviyo scripts will be initialized. On subsequent page transitions, the scripts will be initialized immediately."},"cookie":{"title":"Cookie consent"}},"pop-up":{"title":"Back-In-Stock Pop-up Styles","open-button-fieldset-label":"Pop-Up opening button","close-button-fieldset-label":"Pop-Up close button","subscribe-button-fieldset-label":"Subscribe button","snippet-button-fieldset-label":"Snippet names","additional-classes-fieldset-label":"Additional classes","colorLabel":"Color","backgroundLabel":"Background","openBtnLabel":"Open Button","closeBtnLabel":"Close Button","contentMessageLabel":"Content message","subscribeBtnLabel":"Subscribe Button","subscribeCheckboxLabel":"Subscribe checkbox text","emailFieldLabel":"Email field label","emailFieldPlaceholder":"Email field placeholder"},"configs":{"credentials":{"messageNotBlank":"This field must be filled."},"enabled":{"label":"Enable Account","helpText":"By switching this toggle you can enable/disable configured Klaviyo account on current sales-channel."},"privateApiKey":{"label":"Klaviyo Private API key","helpText":"Klaviyo Private API key. You can find it in your Klaviyo account"},"publicApiKey":{"label":"Klaviyo Public API key","helpText":"Klaviyo Public API key. You can find it in your Klaviyo account"},"klaviyoListForSubscribersSync":{"label":"Klaviyo List name for subscribers sync","helpText":"The name of the Subscribers list in Klaviyo where all Shopware 6 subscribers will be added.\\n In case of duplicate names first found list will be used"},"bisVariantField":{"label":"Back in stock variant field mapping","helpText":"Back in stock variant mapping","productId":"Product ID"},"cookieConsent":{"label":"Cookie Consent","helpText":"Cookie Consent","nothingLabel":"Nothing","shopwareLabel":"Shopware Default","cookieBotLabel":"CookieBot"},"trackDeletedAccountOrders":{"label":"Track Deleted Account\'s Orders","helpText":"Do we need to synchronize deleted customer\'s order events to Klaviyo? Note: When this feature is enabled, duplicate Klaviyo profiles may be synchronized."},"trackViewedProduct":{"label":"Track Viewed Product","helpText":"Do we need to send \\"Viewed Product\\" Event to Klaviyo?"},"trackRecentlyViewedItems":{"label":"Track Recently Viewed Items","helpText":"Do we need to send \\"Recently Viewed Items\\" Event to Klaviyo?"},"trackAddedToCart":{"label":"Track Added to Cart","helpText":"Do we need to send \\"Added to Cart Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackStartedCheckout":{"label":"Track Started Checkout","helpText":"Do we need to send \\"Started Checkout Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackPlacedOrder":{"label":"Track Placed Order","helpText":"Do we need to send \\"Placed Order Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackOrderedProduct":{"label":"Track Ordered Product","helpText":"Do we need to send \\"Ordered Product Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackFulfilledOrder":{"label":"Track Fulfilled Order","helpText":"Do we need to send \\"Fulfilled Order Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackCancelledOrder":{"label":"Track Cancelled Order","helpText":"Do we need to send \\"Cancelled Order Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackRefundedOrder":{"label":"Track Refunded Order","helpText":"Do we need to send \\"Refunded Order Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackPaidOrder":{"label":"Track Paid Order","helpText":"Do we need to send \\"Paid Order Event\\" to Klaviyo?\\nDecision will also affect Synchronization of the historical events"},"trackSubscribedToBackInStock":{"label":"Track Back In Stock","helpText":"Do we need to send \\"Back In Stock Event\\" to Klaviyo?\\n"},"apiValidation":{"buttonLabel":"API-key test","emptyErrorMessage":"\\"{entityName}\\" should not be blank!","generalErrorMessage":"Unable to validate API-keys","incorrectCredentialsTitle":"Incorrect Credentials","correctApiMessage":"API-keys are valid","listNotExistMessage":"The specified list is not in the Klaviyo account"}},"customer":{"title":"Custom Field Mapping","fieldMapping":{"labelNotFilledError":"Field Name must be filled.","noMappingFieldsError":"There are no customer custom fields for mapping.","item":{"fieldName":"Field Name","fieldNamePlaceholder":"Type mapping custom label"}}}},"klaviyo_integration_plugin":{"not_available":"N/A","subscribers":{"last_synchronization_status":{"finished":"Last Synchronization: {status} ({date})","not_finished":"Last Synchronization: {status}"},"last_success_synchronization":"Last Success Synchronization: {date}","get_synchronization_status":{"failed":"Failed to get Last Subscribers synchronization status"},"schedule_synchronization":{"button_label":"Synchronize subscribers","success":"Subscribers synchronization scheduled","failed":"Subscribers synchronization failed to schedule","is_running":"Subscribers synchronization is already running","is_scheduled":"Subscribers synchronization is already scheduled"}},"historical_events_tracking":{"last_synchronization_status":{"finished":"Last Synchronization: {status} ({date})","not_finished":"Last Synchronization: {status}"},"last_success_synchronization":"Last Success Synchronization: {date}","get_synchronization_status":{"failed":"Failed to get Last Historical Events Tracking synchronization status"},"schedule_synchronization":{"button_label":"Synchronize historical events","success":"Historical events synchronization scheduled","failed":"Historical events synchronization failed to schedule","is_running":"Historical events synchronization is already running","is_scheduled":"Historical events synchronization is already scheduled"}},"promotion":{"exportInKlaviyoFormatButtonLabel":"Export in Klaviyo Format"},"productComparison":{"templates":{"template-label":{"klaviyo-product-feed":"Klaviyo (XML)"}}}}}')},"V/JL":function(e,n,t){var i=t("YWM9");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("ydqr").default)("37b1bf92",i,!0,{})},Y3GR:function(e,n,t){},YWM9:function(e,n,t){},YZ4t:function(e,n,t){var i=t("DO9V");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("ydqr").default)("ca9343a0",i,!0,{})},fNO0:function(e,n,t){var i=t("Y3GR");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("ydqr").default)("afdfd712",i,!0,{})},j7QG:function(e,n,t){var i=t("Gc0+");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("ydqr").default)("337a37d6",i,!0,{})},ydqr:function(e,n,t){"use strict";function i(e,n){for(var t=[],i={},o=0;o<n.length;o++){var a=n[o],r=a[0],l={id:e+":"+o,css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(l):t.push(i[r]={id:r,parts:[l]})}return t}t.r(n),t.d(n,"default",(function(){return h}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,s=0,c=!1,u=function(){},d=null,p="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,n,t,o){c=t,d=o||{};var r=i(e,n);return f(r),function(n){for(var t=[],o=0;o<r.length;o++){var l=r[o];(s=a[l.id]).refs--,t.push(s)}n?f(r=i(e,n)):r=[];for(o=0;o<t.length;o++){var s;if(0===(s=t[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete a[s.id]}}}}function f(e){for(var n=0;n<e.length;n++){var t=e[n],i=a[t.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](t.parts[o]);for(;o<t.parts.length;o++)i.parts.push(y(t.parts[o]));i.parts.length>t.parts.length&&(i.parts.length=t.parts.length)}else{var r=[];for(o=0;o<t.parts.length;o++)r.push(y(t.parts[o]));a[t.id]={id:t.id,refs:1,parts:r}}}}function b(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function y(e){var n,t,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(c)return u;i.parentNode.removeChild(i)}if(g){var o=s++;i=l||(l=b()),n=m.bind(null,i,o,!1),t=m.bind(null,i,o,!0)}else i=b(),n=_.bind(null,i),t=function(){i.parentNode.removeChild(i)};return n(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;n(e=i)}else t()}}var v,k=(v=[],function(e,n){return v[e]=n,v.filter(Boolean).join("\n")});function m(e,n,t,i){var o=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(n,o);else{var a=document.createTextNode(o),r=e.childNodes;r[n]&&e.removeChild(r[n]),r.length?e.insertBefore(a,r[n]):e.appendChild(a)}}function _(e,n){var t=n.css,i=n.media,o=n.sourceMap;if(i&&e.setAttribute("media",i),d.ssrId&&e.setAttribute(p,n.id),o&&(t+="\n/*# sourceURL="+o.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}});